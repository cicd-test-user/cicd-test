# EC2 Dynamic Inventory
# See: https://docs.ansible.com/ansible/latest/collections/amazon/aws/aws_ec2_inventory.html

plugin: amazon.aws.aws_ec2
regions:
  - ap-northeast-1

filters:
  tag:Environment:
    - poc

hostnames:
  - private-ip-address  # ← ここを変更（NameタグからプライベートIPに）

keyed_groups:
  - key: tags.Environment
    separator: ''
    prefix: ''
  - key: tags.Role
    separator: ''
    prefix: ''

compose:
  ansible_host: instance_id  # For ssm connection
